# 程序设计文档：XML网站构建器
## 程序目的
本程序旨在通过读取输入的XML文件，根据其中的信息构建一个静态网站。输入的XML文件应该包含网站的目录结构、每个页面的标题和内容。

## 程序实现
为了实现XML网站构建器，我们使用了Python语言及其自带的xml.sax模块。程序的主要实现包括以下部分：

### 内容处理器（ContentHandler）
内容处理器是XML解析器使用的一个类，它定义了解析器应该如何处理输入的XML文件中的各种节点。

在我们的程序中，我们继承了ContentHandler类，重写了其startElement、endElement和characters方法。这些方法分别在解析器遇到起始节点、结束节点和普通文本节点时被调用。在这些方法中，我们保存了解析器当前的状态，包括目录结构和当前页面的标题和内容。

### 分配器（Dispatcher）
分配器是一个类，它将节点名称和方法名称进行映射，可以根据节点的名称调用相应的方法。在我们的程序中，我们实现了一个简单的分配器，它不仅可以将节点名称和方法名称进行映射，还可以根据节点属性进行处理。

### 网站构建器（WebsiteConstructor）
网站构建器是我们的主要类，它继承了分配器和内容处理器，并定义了我们的网站构建流程。在构建过程中，网站构建器会先检查解析器当前的状态，然后根据状态调用相应的方法，最终生成静态网站文件。

具体来说，我们的网站构建器会按照如下流程构建网站：

读取输入的XML文件，并创建一个对应的解析器；
遍历解析器解析出的节点，并根据节点类型进行相应的处理；
处理目录节点时，我们会创建对应的目录，以便保存后续页面文件；
处理页面节点时，我们会创建独立的HTML文件，并将其保存在相应的目录中；
在页面文件中，我们会在头部写入页面的title，随后写入页面的内容，在尾部写入HTML闭合标签。
程序输入输出
程序的输入是一个XML文件，其中包含我们所要构建的网站的目录结构、页面标题和内容。程序的输出是静态网站文件，即包含了所有输入XML文件中指定的页面的HTML文件和对应的资源文件（如图片、CSS文件等）。

## 程序运行实例
程序的运行示例如下：

from xml.sax.handler import ContentHandler
from xml.sax import parse
import os


class Dispatcher:
    def dispatch(self, prefix, name, attrs=None):
        ...


class WebsiteConstructor(Dispatcher, ContentHandler):
    ...

parse('website.xml', WebsiteConstructor('output'))
其中，WebsiteConstructor的初始化函数传入的参数是输出目录的路径。我们将解析出的HTML文件和资源文件保存在该输出目录中。

## 程序分析
详见代码注释


## 程序运行结果
程序运行后，我们可以在输出目录中看到生成的网站文件
